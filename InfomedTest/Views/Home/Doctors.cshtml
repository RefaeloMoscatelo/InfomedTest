@model IEnumerable<InfomedTest.Models.Doctor>

@{
    ViewBag.Title = "Doctors";
}

<h2>רופאים</h2>


<style>
    .star-rating::before {
        content: "⭐⭐⭐⭐⭐";
    }

    .star-rating {
        display: inline-block;
        background-clip: text;
        -webkit-background-clip: text;
        color: rgba(0, 0, 0, 0.1);
    }

    .rate {
        color: blue;
    }
</style>

<table class="table">
    <tr>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                <div>
                    <span>ד"ר</span> @Html.DisplayFor(modelItem => item.FullName)
                </div>
                <div class="star-rating"
                     style="background-image: linear-gradient(
      to left,
      blue 0%,
      blue  @(item.Rating*20)%,
      transparent 33.333%,
      transparent 100%);
  "> <span class="rate">(@item.Rating.0) </span></div>

</td>
<td>
</td>
<td>
    <p>
        נותן שירות בשפה:  <span class="langauges">

    @{ var lastPerson = @item.Languages.LastOrDefault(); }
    @for (int i = 0; i < @item.Languages.Count; i++)
    {
        @(item.Languages[i]!= lastPerson?$"{item.Languages[i]}, ": item.Languages[i]) 

    }
</span>
    </p>
    <span>לרופא יש כתבה משוייכת:  </span> <span class="isArticle">  @item.isArticle</span>
</td>
<td>
    <p> <input type="button" value=@Html.DisplayFor(modelItem => item.PhoneNumber) /></p>

    <p> <input type="button" id="btnCreateContact" value="צור קשר" /></p>
</td>

</tr>
}

</table>

<div id="contactForm">
    <div>
        <div>
            <label for="Name">שם:</label>
            <input pattern="/^[a-z\u0590-\u05fe]+$/i" type="text" name="Name" id="Name" value="" required />
        </div>
        <div>
            <label for="Phone">טלפון:</label>
            <input pattern="[0-9]" type="text" name="Phone" id="Phone" value="" required />
        </div>
        <p>
            <input type="button" value="שלח" id="btnSave" />
        </p>
    </div>
</div>

@section scripts{
    <script>
        $.fn.stars = function () {
            return $(this).each(function () {
                var val = parseFloat($(this).html());
                var size = Math.max(0, (Math.min(5, val))) * 16;
                var $span = $('<span />').width(size);
                $(this).html($span);
            });
        }
        $(document).ready(function () {
            $(function () {
                $('span.stars').stars();
            });
            $(".isArticle").each(function () {
                var value = $(this).html();
                if (value == '  False') {
                    $(this).html("לא")
                }
                else {
                    $(this).html("כן")
                }
            });

            $("#contactForm").dialog({
                autoOpen: false, modal: true, show: "blind", hide: "blind"
            });
            $("#btnCreateContact").on("click", function () {
                $("#contactForm").dialog("open");
            });

        });
    </script>

}